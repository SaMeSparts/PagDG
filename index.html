<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EFI-VOLT</title>
  </head>

  <body class="relative flex flex-col items-center justify-center min-h-screen bg-no-repeat bg-gradient-to-b from-white to-green-500">
    
    <div>
      <nav class="absolute top-0 left-0 flex items-center justify-center w-full h-16 p-4 bg-gray-100 border-b-4 border-green-600 shadow-md">
        <img class="absolute left-0 h-10 mt-2 rounded-md w-44 md:w-36" src="./logo.jpg" alt="Logo EFI-VOLT" />
        <button id="open-sidebar-btn" class="absolute right-3 size-6">
          <img src="./Boton3lineas.png" alt="Abrir menú">
        </button>
      </nav>
    </div>
    
    <div id="page-informacion" class="flex flex-col items-center hidden w-full page-content"> 
      <section class="flex items-center text-center">
        <h1 class="mb-10 font-sans text-3xl font-bold text-green-800 uppercase font-stretch-extra-expanded text-shadow-lg font-merriweather">
          Información del Proyecto EFI-VOLT
        </h1>
      </section>
      <main class="flex items-center justify-center px-2 mx-10 bg-white border-b-4 border-r-4 border-green-600 rounded-lg hover:shadow-lg">
        <section class="flex flex-col max-w-lg px-4 overflow-auto text-black max-h-80 md:max-w-xl md:max-h-96 ">
          <section class="p-2">
            <img src="./foto1.jpg" alt="Descripción foto 1" class="h-auto mx-auto mb-2 rounded-lg shadow-md w-60 md:float-right md:ml-4" />
            <h1 class="text-xl font-stack">DESCRIPCIÓN DEL PROYECTO</h1>
            <p class="text-xs text-justify font-roboto">
              EFI-VOLT es un sistema IoT (Internet de las Cosas) diseñado para la gestión inteligente del consumo eléctrico. Utilizando el microcontrolador ESP32 y sensores de corriente no invasivos (SCT-013), el dispositivo mide el amperaje en tiempo real y se conecta vía Wi-Fi a la nube de Google Firebase. A diferencia de los medidores tradicionales, EFI-VOLT no solo muestra números, sino que procesa los datos para calcular el <strong>costo monetario acumulado</strong> y el consumo en kWh, permitiendo al usuario visualizar cuánto dinero está gastando antes de que llegue el recibo de luz.            
            </p>
          </section>
          <div class="clear-both pt-4 ">
            <img src="./foto2.jpg" alt="Descripción foto 2" class="h-auto mx-auto mt-4 mb-2 rounded-lg shadow-md w-60 md:float-left md:mr-4" />
            <h2 class="mt-4 text-lg font-stack">¿En qué situaciones utilizará la interfaz?</h2>
            <p class="mt-2 text-xs leading-relaxed text-justify font-roboto">
              La interfaz web progresiva permite monitorear el hogar o la oficina desde cualquier lugar del mundo. Es ideal para detectar <strong>"fugas de energía"</strong> o aparatos que consumen electricidad incluso apagados (consumo vampiro). Gracias a su capacidad de registro histórico, el usuario puede analizar patrones de consumo durante las 24 horas del día mediante gráficas interactivas, identificando picos de uso inusuales (como un aire acondicionado defectuoso o maquinaria encendida fuera de horario) y tomando decisiones informadas para reducir gastos.
            </p>
          </div>
          <div class="clear-both pt-4 ">
            <img src="./foto3.jpg" alt="Descripción foto 3" class="h-auto mx-auto mb-2 rounded-lg shadow-md w-60 md:float-right md:ml-4" />
            <h2 class="mt-4 text-lg font-stack">¿Qué información necesita ver de forma inmediata?</h2>
            <p class="mt-2 text-xs leading-relaxed text-justify font-roboto">
              El sistema procesa lecturas cada segundo para ofrecer una precisión alta. En la plataforma, el usuario tiene acceso inmediato a tres indicadores clave:
              <br>1. <strong>Corriente Real (Amperes):</strong> Visualizada en un monitor circular dinámico.
              <br>2. <strong>Gasto Estimado ($):</strong> Cálculo automático basado en el precio del kWh, actualizado cada 5 segundos.
              <br>3. <strong>Estado del Dispositivo:</strong> Un sistema de "latido" (Heartbeat) indica si el equipo está conectado (Online) o si ha perdido energía (Offline), garantizando que la información mostrada siempre sea confiable y actual.            </p>
          </div>
        </section>
      </main>
      <button class="z-10 px-4 py-2 mt-6 mb-4 font-bold text-white uppercase bg-green-600 border-2 border-green-800 rounded-lg hover:bg-green-700" onclick="window.location.href='https://maze-binary-92200120.figma.site/'">Prototipo de interfaz</button>
    </div>  

    <div id="page-dispositivos" class="flex flex-col items-center hidden w-full pt-20 page-content">
      <section class="flex items-center text-center">
        <h1 class="mb-10 font-sans text-3xl font-bold text-green-800 uppercase font-merriweather">
          Dispositivos Conectados
        </h1>
      </section>

      <main class="flex flex-col p-6 mx-10 bg-white border-b-4 border-r-4 border-green-600 rounded-lg hover:shadow-lg w-full max-w-6xl h-[70vh] overflow-auto">
        <h1 class="text-xl font-stack">Mis Dispositivos</h1>
        <p class="mt-2 mb-4 text-justify font-roboto">
          Añade y gestiona tus dispositivos EFI-VOLT.
        </p>

        <div id="devices-grid" class="grid grid-cols-2 gap-4 md:grid-cols-4">
          <button id="btn-add-device" class="flex flex-col items-center justify-center p-4 text-green-700 transition-colors border-2 border-green-400 border-dashed rounded-lg bg-green-50 aspect-square hover:bg-green-100">
              <img src="./mas.png" class="fill-green-400">
            <span class="mt-2 text-sm font-semibold font-roboto">Añadir</span>
          </button>
        </div>
      </main>
    </div>
      
    <div id="page-ajustes" class="flex flex-col items-center w-full pt-20 page-content">
      <section class="flex items-center text-center">
        <h1 class="mb-10 font-sans text-3xl font-bold text-green-800 uppercase font-merriweather">
          Ajustes de la Cuenta
        </h1>
      </section>

      <main class="flex items-center justify-center px-2 mx-10 bg-white border-b-4 border-r-4 border-green-600 rounded-lg hover:shadow-lg">
        <section class="flex flex-col w-full max-w-lg px-4 py-6 overflow-auto text-black max-h-96 md:max-w-xl">
          <section id="login-section" class="">
            <h1 class="text-xl font-stack">Iniciar Sesión</h1>
            <p class="mt-4 text-sm font-roboto">
              Conecta tu cuenta para guardar y sincronizar tus dispositivos.
            </p>
            <button id="btn-login-google" class="flex items-center justify-center px-4 py-2 mt-6 font-bold text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50">
              <img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="Google logo" class="w-10 h-5 mr-2">
              Iniciar sesión con Google
            </button>
          </section>

          <section id="user-info-section" class="hidden">
            <h1 class="text-xl font-stack">Perfil de Usuario</h1>
            <p class="mt-4 text-sm font-roboto">
              Conectado como: <span id="user-email-display" class="font-bold"></span>
            </p>
            <button id="btn-logout" class="px-4 py-2 mt-6 font-bold text-white bg-red-600 rounded-lg hover:bg-red-700">
              Cerrar Sesión
            </button>
          </section>
        </section>
      </main>
    </div>

    <div id="overlay" class="fixed inset-0 z-40 hidden bg-black bg-opacity-60"></div>
    <div id="sidebar" 
         class="fixed top-0 right-0 z-50 w-64 h-full p-5 transition-transform duration-300 ease-in-out transform translate-x-full bg-gray-100 shadow-lg rounded-tl-md rounded-bl-md">
        
        <div class="flex items-center justify-between mb-4">
          <h2 class="text-2xl font-bold text-green-500">Menú</h2>
          <button id="close-sidebar-btn" class="text-3xl text-gray-600 hover:text-gray-900">&times;</button>
        </div>
        
        <nav class="flex flex-col space-y-2">
          <a href="#" class="p-2 text-gray-700 rounded nav-link hover:bg-gray-200" data-target="page-dispositivos">Dispositivos</a>
          <a href="#" class="p-2 text-gray-700 rounded nav-link hover:bg-gray-200" data-target="page-informacion">Información</a>
          <a href="#" class="p-2 text-gray-700 rounded nav-link hover:bg-gray-200" data-target="page-ajustes">Ajustes</a>
        </nav>
    </div>

    <div id="device-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden transition-opacity bg-black bg-opacity-50 backdrop-blur-sm">
      <div class="relative w-full max-w-md p-6 mx-4 bg-white border-t-8 border-green-600 rounded-lg shadow-2xl max-h-[95vh] overflow-y-auto">
          
          <button id="close-modal-btn" class="absolute z-10 text-gray-400 transition-colors top-3 right-3 hover:text-red-500">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
          </button>

          <h2 id="modal-device-name" class="mb-2 text-2xl font-bold text-center text-gray-800 font-merriweather">Nombre Dispositivo</h2>
          
          <div class="flex flex-col items-center justify-center my-4">
            <div class="relative flex items-center justify-center w-48 h-48 border-8 border-green-100 rounded-full shadow-inner bg-green-50">
              <div class="text-center">
                 <span id="modal-voltage" class="text-4xl font-bold text-green-700 font-stack">--</span>
                 <span class="text-lg text-green-600">A</span>
              </div>
              <div class="absolute inset-0 border-4 border-green-500 rounded-full opacity-50 border-t-transparent animate-spin" style="animation-duration: 3s;"></div>
            </div>
          </div>

          <div class="w-full h-48 p-2 mb-4 bg-white border border-gray-100 rounded-lg">
            <canvas id="voltageChart"></canvas>
          </div>

          <div class="grid grid-cols-2 gap-3 mb-4 text-center">
            
            <div class="flex flex-col justify-center p-3 border border-gray-100 rounded-lg bg-gray-50">
              <span class="mb-1 text-xs text-gray-500">Corriente Prom.</span>
              <span class="text-lg font-bold text-gray-700"><span id="modal-avg">--</span> A</span>
            </div>

            <div class="flex flex-col justify-center p-3 border border-green-100 rounded-lg bg-green-50">
              <span class="mb-1 text-xs text-green-600">Gasto Estimado</span>
              <span class="text-lg font-bold text-green-800">$<span id="modal-cost">0.00</span></span>
            </div>
            
          </div>

          <div class="mt-4 text-center">
            <p class="text-xs italic text-gray-400">Datos en tiempo real vía Firebase</p>
          </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>